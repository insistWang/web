<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Chess Room</title>
</head>
<body>
	<h1>Chess Room</h1>
	<input id="sendTxt" type="text" >
	<button id="sendBtn">发送</button>
	<div id="numPeople" ></div>>
	<script type="text/javascript">
		var socket = new WebSocket("ws://localhost:3000/");

		function synMessage(content,type){

			if(type == "roomMessage"){
				synRoomMessage(content,type);
			}else{
				showMessage(content,type)
			}			
		}							

		function synRoomMessage(content,type){
			// document.getElementById("numPeople").innerHTML = "房间人数："+content；
		}

		function showMessage(content,type){
			var div = document.createElement("div");
			div.innerHTML = content;
			if(type == "enter"){
				div.style.color = "blue"
			} else if(type == "leave"){
				div.style.color = "red"
			}
			document.body.appendChild(div);
		}

		socket.onopen = function(){
				document.getElementById("sendBtn").onclick = function(){
				var txt = document.getElementById("sendTxt").value;
				if (txt) {
					socket.send(txt)
				}
			}
		}

		socket.onmessage = function(e){
			// console.log(e.data);
			var mes = JSON.parse(e.data)
			synMessage(mes.data,mes.type)
		}

		socket.onclose = function(){
			document.getElementById("recv").innerHTML = "close!"; 
		}
		
	</script>
</body>
</html>>